<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ejemplos</title>
  </head>
  <body>

    <script>

      const pablo = {
        nombre: 'Pablo',
        apellido: 'Andrés'
      }

      const mariela = {
        nombre: 'Mariela',
        apellido: 'Riesnik'
      }

      function saludar() {
        console.log(`Hola, mi nombre es ${this.nombre}`)
      }

      // Si ejecuto:

      saludar()
      // Hola, mi nombre es undefined

      // Ya que tenemos la función definida dentro de un contexto global el 'this' en saludar() refiere al objeto 'window'. Por lo tanto es lo mismo que:

      window.saludar()
      // Hola, mi nombre es undefined

      /* El método ‘.bind()’ se usa justamente para cambiar en contexto. 
      bind() nos devuelve una nueva función atando el parámetro
      */

      const saludarAPablo = saludar.bind(pablo)
      const saludarAMariela = saludar.bind(mariela)

      saludarAPablo()
      // Hola, mi nombre es Pablo

      saludarAMariela()
      // Hola, mi nombre es Mariela

      setTimeout( saludar.bind(pablo), 1000) == setTimeout(saludarAPablo, 1000)

      function saludar(saludo = 'Hola') {
        console.log(`${saludo}, mi nombre es ${this.nombre}`)
      }
      
      setTimeout( saludar.bind(pablo, 'Hola loco!'), 1000)
      // Hola loco!, mi nombre es Pablo

      //también se puede agragar en la declaración de la constante.
      const saludarApablo = saludar.bind(pablo, 'Hola loco!!')
      // Hola loco!!, mi nombre es Pablo

      /*  El primer parámetro es el contexto y luego van los siguientes 
          parámetros en el orden en el que aparezcan.
          IMPORTANTE!!!
          La función .bind() no ejecuta la función a la que se agrega, 
          sino que simplemente nos retorna una nueva función con ese contexto 
          cambiado. 
      */

      saludar.call(pablo)
      // Hola, mi nombre es Pablo  -  se ejecuta inmediatamente

      saludar.bind(pablo)
      // no produce ningún resultado, nola ejecuta.

      saludar.call(pablo, 'Hola cheeee!!')
      // Hola cheeee!!, mi nombre es Pablo

      /* Usando el método .apply, es similar a .call pero los parámetros 
      adicionales se pasan como un arreglo de valores. */
      saludar.apply(pablo, ['Hola mi querido'])
      // Hola mi querido, mi nombre es Pablo




    </script>


  </body>
</html>
